---
title: "Как в Monero победили болезнь размера блоков, поразившую Bitcoin"
slug: "dynamic-block-size"
date: "2020-08-28"
image: "/images/blocks.png"
image_credit: "Illustration by CypherStack"
image_credit_url: "https://cypherstack.com"
---
_**Примечание:** Читателю настоятельно рекомендуется прочитать наши статьи [ «Почему Monero имеет хвостовую эмиссию» ](/knowledge/monero-tail-emission) и [ «Майнинг Monero: что делает случайнымX такой особенный»](/knowledge/monero-mining-randomx). Эта статья основана на представленных там концепциях._

Всякий раз, когда люди обсуждают проблемы с блокчейном, одним из первых слов, которые всплывают, будет «масштабирование». Ни для кого не секрет, что блокчейны плохо масштабируются, но большинство людей не знают, почему.

На самом деле масштабирование — это общий термин, охватывающий две разные категории: поддержка протоколов и технологическая поддержка в данный момент времени. В этой статье мы сосредоточим наше внимание на одном: поддержка протокола — это, по сути, мера того, сколько транзакций протокол может обработать в данный момент времени.

Биткойн имеет ограничение на размер блока. Это означает, что как только в блок будет включено достаточное количество транзакций, любые дополнительные транзакции должны будут ждать в очереди для следующего блока. Полезной аналогией будет размышление о поезде. Поезд подъезжает к станции, и те, кто стоит в очереди, входят внутрь. Как только поезд заполнится, всем, кто останется снаружи, придется ждать следующего.

Биткойн использует комиссию, чтобы определить, кто попадет в блок, а кто нет. Возвращаясь к аналогии с поездом, можно представить себе, что один потенциальный пассажир, который вот-вот останется позади, предлагает машинисту поезда пять долларов, чтобы дать ему место. Другие пассажиры следуют их примеру, и в конечном итоге начинается война за право определить, кто какое место получит. Водителю решать, хочет ли он соблюдать политику «первым пришел первым обслужен», но в его лучших финансовых интересах максимизировать свой доход, принимая на борт тех, кто предложит самую высокую цену.

В этой аналогии шахтеры — это машинисты поездов. Они могут включать в блок любые транзакции, но обычно выбирают те, которые имеют самую высокую комиссию.

В качестве альтернативы, если блоки не очень заполнены, у людей нет стимула платить высокие сборы, потому что есть много свободных мест.

В разгар криптовалютного бума 2017 года Биткойн был наводнен транзакциями, и комиссии резко возросли для тех, кто хотел быть включенным в следующий блок или любой блок ближайшего будущего, если уж на то пошло. Те, кто не желал платить высокие комиссии, видели, что их транзакции откладывались на часы, дни или даже вообще выпадали из очереди.

Это было душераздирающее представление о том, как поведет себя Биткойн, если произойдет то, что часто говорят о «массовом принятии». Если бы Биткойн стал использоваться массами, ситуация была бы еще хуже, чем в 2017 году, и Биткойн был бы недоступен никому, кроме богатых, просто потому, что пропускная способность мала из-за фиксированного размера блока, что привело бы к захвату рынка комиссий. .

Monero предвидел это и захотел сделать что-то другое. Поэтому разработчики Monero реализовали динамический размер блока.

По сути, Monero также имеет ограничение размера блока, но это мягкое ограничение. Когда очередь ожидающих транзакций становится слишком длинной, майнеры могут увеличить размер блоков. Используя нашу аналогию с поездом, вы можете представить себе добавление большего количества вагонов для размещения дополнительных пассажиров. После того, как очередь опустеет, блоки снова сжимаются до исходного размера.

Если это кажется хорошей идеей, то разумно задаться вопросом, почему Monero — единственная криптовалюта, которая реализовала это. Почему бы не добавить его в Биткойн, чтобы положить конец проблемам с пропускной способностью? 

К сожалению, это невозможно. Тому есть несколько причин, и мы постараемся их объяснить.

В интересах майнера всегда иметь большие блоки. Благодаря большим блокам они могут вместить больше транзакций и заработать больше денег на комиссиях, а также на вознаграждениях за блоки. Это может привести к спам-атакам, когда кто-то отправляет множество мелких транзакций с небольшой комиссией, чтобы раздуть цепочку. Майнеры просто увеличили бы размер блока, включив их всех, потому что деньги есть деньги, какими бы маленькими они ни были. Это приведет к постоянному увеличению блоков с небольшой экономической выгодой. Биткойн решает эту проблему, искусственно ограничивая размер блока, тем самым создавая рынок комиссий. Злоумышленникам, занимающимся спамом, придется переплачивать другим пользователям в виде комиссий, а это уже недешево. Но это означает, что блоки заполняются, оставляя некоторые транзакции в ожидании, как упоминалось выше. 

Так как же Monero может иметь динамические размеры блоков, но при этом избегать спам-атак? Ответ простой, но умный. Штраф на вознаграждение за блок вводится, когда блок больше обычного. Если майнер захочет увеличить размер блока, вознаграждение, которое он получит от нахождения этого блока, будет меньше, чем он получил бы в противном случае. Таким образом, они будут увеличивать размер блока только тогда, когда уплаченные пользователями комиссии за транзакции перевешивают потерянную часть вознаграждения за блок. Например, если майнер потеряет 0,5 XMR из-за увеличения размера блока, а сумма уплаченных комиссий за транзакцию составит 0,4 XMR, то чистый убыток составит 0,1 XMR, если он увеличит размер блока, поэтому он не делай этого. И наоборот, если общая сумма комиссий за транзакцию составит 0,7 XMR, то чистая прибыль составит 0,2 XMR, даже если они потеряют 0,5 XMR из-за штрафа за вознаграждение за блок, поэтому майнер увеличит размер.

Эти динамические блоки позволяют сети расти органично, без искусственного ограничения размера блока, чтобы создать рынок принудительной комиссии, и при этом избегать спам-атак. Есть еще несколько точек зрения, под которыми мы можем рассмотреть эту идею, и больше причин, по которым невозможно добавить что-либо в Биткойн, но на данный момент мы надеемся, что читатель понимает, как Monero обходит некоторые проблемы Биткойна и его производные и то, как компания планирует масштабировать свою пропускную способность в будущем.

Читайте также