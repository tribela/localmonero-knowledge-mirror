---
title: "Теги просмотра: Как один байт сократит время синхронизации кошелька Монеро более чем на 40%"
slug: "view-tags-reduce-monero-sync-time"
date: "2022-02-03"
image: "/images/viewTags.png"
image_credit: "Illustration by CypherStack"
image_credit_url: "https://cypherstack.com"
---
Одна из самых распространенных жалоб на использование Монеро в повседневной жизни - это время, которое может потребоваться для синхронизации кошелька, прежде чем вы сможете отправить Монеро. К счастью, разработчики и исследователи сообщества Монеро нашли блестящий способ сократить время синхронизации кошелька на более чем 40% без каких-либо дополнительных раздуваний блокчейна, комиссий и т.д.

Выход “Тега просмотра (View tags)”, однобайтового дополнения к данным каждой транзакции - дополнение появится в Монеро при следующем обновлении сети!

## Почему кошелек Монеро синхронизируется медленнее, чем кошелек Биткоина?

Один из первых вопросов, на который мы должны ответить, чтобы лучше понять необходимость такого решения, как тег просмотра, - почему синхронизация кошелька Монеро происходит медленнее, чем у таких криптовалют, как Биткоин.

В Биткоине, поскольку все транзакции не являются приватными и показывают тратящиеся монеты, суммы и адреса, задействованные в блокчейне, кошельки Биткоина могут просто искать любые неизрасходованные транзакционные выводы (UTXO) или использованные адреса для данного кошелька, быстро сканируя блокчейн на предмет наличия только UTXO, принадлежащих этим адресам, чтобы выяснить, какие монеты принадлежат вашему кошельку и могут быть потрачены.

В Монеро, однако, все транзакции сохраняют конфиденциальность пользователя, скрывая отправителя, получателя и суммы, участвующие в каждой транзакции. Такая конфиденциальность, хотя и является жизненно важной для защиты пользователей сети, также приводит к замедлению синхронизации кошелька. В Монеро ваш кошелек должен сравнивать каждый потраченный вывод транзакции (TXO), существующий в сети, с закрытыми ключами вашего кошелька.

Это сравнение включает в себя множество сложных математических вычислений и криптографию для подтверждения того, что вывод действительно ваш, поскольку все суммы, адреса и известные потраченные выводы (или монеты) скрыты на блокчейне Монеро.

## Что такое теги просмотра?

Чтобы сократить время синхронизации кошельков Монеро, [исследователь по ником UkoeHB предложил новый подход](https://github.com/monero-project/research-lab/issues/73) – добавить 1-байтовый “тег” к каждой транзакции, используя общий секрет, известный только отправителю и получателю этой транзакции.

Этот общий секрет генерируется отправителем с использованием адреса, предоставленного ему получателем, и не требует активного взаимодействия со стороны отправителя и получателя. Первый байт (или символ) этого общего секрета затем добавляется к данным транзакции при ее публикации в сети Монеро.

Когда один из участников транзакции захочет синхронизировать свой кошелек с блокчейном Монеро, вместо того, чтобы выполнять всю сложную математику и криптографию для каждого потраченного вывода в сети, кошелек теперь может просто проверить наличие этого однобайтового поля в каждой транзакции и только затем выполнить трудоемкую проверку транзакций, имеющих этот тег - если быть точным, это 1/256 потраченных выводов в сети,!

Этот тег не раскрывает никакой информации о транзакции сторонним наблюдателям, добавляет только 1 байт (ничтожно малое количество) к размеру транзакции, и все же позволяет нам сократить время синхронизации на 40%+ за счет сокращения необходимых сложных проверок!

## Упрощенный пример тегов просмотра

Представьте, что у вас в комнате 4 096 коробок, из которых только 5 принадлежат вам. Внешне все коробки совершенно неотличимы друг от друга, и единственный способ определить, что коробка принадлежит вам, - это открыть ее и решить трудоемкую математическую задачу, написанную внутри, чтобы убедиться, что она ваша.

Теперь представьте, что вы решили попросить человека, отправляющего вам эти 5 коробок, сгенерировать специальный код, используя ваш адрес, а затем нанести только первый символ этого сгенерированного кода на внешнюю сторону каждой отправляемой вам коробки. Все остальные делают то же самое со своими коробками (чтобы все коробки были неотличимы друг от друга), но теперь вы можете просто посмотреть на односимвольный код на внешней стороне коробки и открыть только те коробки, на которых есть этот символ.

Хотя другие ящики будут соответствовать вашему коду, даже те, которые вам не принадлежат, то количество ящиков, которые вам нужно открыть и решить математическую задачу, теперь составляет всего 16 (1/256 ящика!) вместо всех 4096.

Теперь вы открываете эти 16 коробок, решаете математические задачи и сохраняете 5 коробок, которые действительно принадлежат вам из этой группы!

## Когда теги просмотра будут доступны в Монеро?

Теги просмотра являются одной из функций, которые в настоящее время планируется включить в [предстоящее обновление сети](https://github.com/monero-project/meta/issues/630), и которые должны появиться весной этого года. Сообщество [собрало 23,3 XMR](https://bounties.monero.social/posts/28/implement-view-tags-to-decrease-wallet-sync-times-in-monero) (на момент написания статьи) для стимулирования разработки и внедрения тегов просмотра, и в результате подавляющее большинство работ по включению тегов просмотра в кодовую базу Монеро уже завершено разработчиком j-berman в сотрудничестве с рецензентами и исследователями.

После введения тегов просмотра в сети все транзакции, отправленные после обновления сети, будут пользоваться преимуществами значительно улучшенного времени синхронизации кошелька. Вам не нужно будет делать ничего особенного, чтобы начать использовать view tags, ваш любимый кошелек для Монеро просто начнет использовать их после обновления сети автоматически!

## Где я могу найти больше информации?

Если это вызвало у вас любопытство по поводу тегов просмотра, посмотрите ниже несколько дополнительных ссылок, углубляющих эту тему:

  * [Сокращение времени сканирования с помощью 1-байтового тега 'view tag'.](https://github.com/monero-project/research-lab/issues/73)
  * [Добавление тегов просмотра к выводам для сокращения времени сканирования кошелька](https://github.com/monero-project/monero/pull/8061)

Читайте также