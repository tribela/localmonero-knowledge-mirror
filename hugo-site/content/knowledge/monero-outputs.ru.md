---
title: "Что такое выходы Monero"
slug: "monero-outputs"
date: "2020-09-30"
image: "/images/outputs.png"
image_credit: "Illustration by CypherStack"
image_credit_url: "https://cypherstack.com"
---
Monero, как и другие криптовалюты, использует выходы как способ учёта средств. Многие опытные пользователи криптовалюты, вероятно, знакомы с термином «выходы», но далеко не все понимают, что он означает, и как эти выходы работают. Как было сказано в нашей статье, посвящённой [кольцевым подписям](/knowledge/ring-signatures), выходы — это фактические объекты, которыми обмениваются стороны, совершающие сделку, в блокчейне. Выход подобен долларовой банкноте, но сумма не имеет фиксированного достоинства.

Если вам заплатят 16 долларов за работу, вы можете получить долларовую, пятидолларовую и десятидолларовую купюры. У вас есть 16 долларов, но в кошельке — три разных купюры. Если вы хотите заплатить кому-то 6 долларов, вы можете использовать купюры достоинством 5 и 1 доллар, но если вы захотите заплатить кому-то 8 долларов, вам придётся использовать 10 долларов и получить обратно 2 доллара сдачей. Наконец, если вы захотите заплатить кому-то 14 долларов, вам придется использовать все три купюры и получить 2 доллара сдачей, но в какой-то момент, когда вы передадите все три купюры, у вас не останется денег в вашем кошельке, пока вы не получите сдачу обратно.

Monero работает подобным образом. Предположим, вы являетесь владельцем магазина и по-отдельности продали три разных товара. Вы можете получить 1,5 XMR, 2,25 XMR и 5,25 XMR, всего 9 XMR. Но в вашем кошельке также появятся три разных выхода номиналом, указанным ранее. Как и в случае с долларами, вы можете захотеть заплатить кому-нибудь 3 XMR. Вы можете использовать выход 5,25 XMR и получить сдачей 2.25 XMR, или же вы можете объединить выходы достоинством 1,5 и 2,25 XMR и получить 0,75 XMR обратно.

Но как только вы отправите транзакцию, используемые вами выходы перейдут в «заблокированное» состояние, что означает, что они станут недоступны, пока вы не получите сдачу обратно. Протокол разблокирует средства (то есть, вернёт вам сдачу) после 10 подтверждений или примерно через 20 минут. Точно так же, как после того, как вы передадите долларовые купюры из своего кошелька, вы не сможете снова использовать деньги, пока не получите сдачу обратно от кассира, ваши Monero будут недоступными, пока вы не получите сдачу.

Вернемся к примеру с отправкой 3 XMR с использованием выхода достоинством 5,25 XMR. Теперь, пока вы ожидаете возврата 1,75 XMR в виде сдачи, вы не можете использовать их. Эти 1,75 XMR будут для вас недоступны. Но вы всё равно сможете воспользоваться выходами достоинством 1,5 XMR и 2,25 XMR, так как они не были потрачены. Возвращаясь к примеру с долларами, если вы заплатили кому-то 8 долларов, как в предыдущем примере, вы не сможете использовать ожидаемые 2 доллара в качестве сдачи до тех пор, пока они не будут отданы вам, но в этом примере в вашем кошельке ещё остаётся неиспользованная десятидолларовая купюра. Её всё ещё можно использовать для покупки всего, что вы пожелаете, в то время, пока вы ожидаете сдачу. То же самое происходит и в случае с Monero.

Это часто сбивает с толку новых пользователей Monero. Часто у пользователя в кошельке может иметься только один выход, полученный от биржи или от друга. Допустим, это выход достоинством 20 XMR. И других выходов в кошельке пользователя попросту нет. Допустим, пользователь захочет сделать пожертвование двум своим любимым благотворительным организациям. Пользователь отправляет 5 XMR первой благотворительной организации, а затем оказывается сбитым с толку, потому что, даже несмотря на то, что у него должно было остаться 15 XMR, он не может сразу же отправить следующее пожертвование во вторую благотворительную организацию. Как вы уже догадались, это связано с тем, что 15 XMR были заблокированы. Их нельзя потратить до тех пор, пока они не будут возвращены в качестве сдачи (до получения 10 подтверждений или примерно в течение 20 минут). После того, как средства будут разблокированы, пользователь сможет отправить второе пожертвование.

Просто, чтобы ещё раз донести мысль: у пользователя не возникло бы этой проблемы, если бы у него было несколько выходов, например, два выхода по 10 XMR или что-то подобное. Он смог бы отправить оба пожертвования одно за другим, потому что для перевода первого пожертвования использовался один из выходов достоинством 10 XMR (и бы ожидал 10 подтверждений и получения 5 XMR в виде сдачи), а для отправки второго пожертвования использовался бы оставшийся выход так же достоинством 10 XMR.

Некоторые криптовалютные кошельки имеют функцию, называемую «управление выходами», которая просто показывает пользователю, какие выходы у него имеются в настоящее время (в дополнение к их общей сумме), а также позволяет выбирать, какие из этих выходов использовать, когда пользователь будет тратить свою криптовалюту.

На данный момент GUI-кошелёк Monero производит выбор выходов для пользователей автоматически, так как самостоятельный выбор пользователями собственных выводов часто приводит к путанице или, в некоторых случаях, вредит их приватности. Однако, в стадии разработки находятся и другие кошельки, такие как новый Feather, который будет иметь такие функции управления выходами.

Мы много говорили об отправке, но с принимающей стороны тоже происходит кое-что интересное. Возвращаясь к нашему примеру отправки 3 XMR и использования выходов достоинством 1,5 XMR и 2,25 XMR при проведении транзакции (и ожидании сдачи в размере 0,75 XMR), получающая сторона НЕ получает два выхода достоинством 1,5 XMR и 2,25 XMR. Вместо этого она получает ОДИН выход достоинством 3 XMR.

В фоновом режиме протокол объединяет все выходы, используемые для траты, и выдаёт получателю один выход из оплаченной суммы, и отправляет один выход сдачи обратно отправителю. Таким образом, отправитель также получает один выход в качестве сдачи, независимо от того, использовал он два, три или десять выходов для проведения транзакции.

Мы надеемся, что прояснили ситуацию в отношении выходов и того, как работает внутренний механизм протокола, связанный с учётом, а также объяснили ту обычную проблему, с которой пользователи сталкиваются, когда их средства блокируются. В очередной статье мы расскажем как управлять вашими выходами так, чтобы минимизировать вероятность ожидания снятия блокировки средств перед отправкой последующих транзакций.

Читайте также